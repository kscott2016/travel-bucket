<%- include('../partials/html-head') %>
<%- include('../partials/nav') %>

  <main>
    <h1><%= trip.name %></h1>
    <p>City: <%= trip.city %> </p>
    <p>Leave Date: <%= trip.tripStart %></p>
    <p>Return Date: <%= trip.tripEnd %></p>
    <a href="/trips/<%= trip._id %>/edit">Edit this trip</a>
    <img src="<%= trip.imgUrl %>"/>
    <h2>Activities</h2>
    <% if (!trip.activities.length) { %>
      <p>No activities planned! Start adding some!</p>
      <a href="/trips/<%= trip._id %>/activities/new">Add activity</a>
    <% } else { %>
      <ul>
      <% trip.activities.forEach(activity => { %>
      <li><%= activity.name %> at <%= activity.venue %></li>
      <a href="/activities/">Activity Details</a>
      <a href="/trips/<%= trip._id %>/activities/<%= activity._id %>/edit">Edit Activity</a>
      <form action="/trips/<%= trip._id %>/activities/<%= activity._id %>?_method=DELETE" method="POST">
        <button type="submit">Delete this trip
        </button>
      </form>
      <% }) %>
      </ul>
      <a href="/trips/<%= trip._id %>/activities/new">Add another activity</a>
    <% }%>
    <form action="/trips/<%= trip._id %>?_method=DELETE" method="POST">
      <button type="submit">Delete this trip
      </button>
    </form>
  </main>

<%- include('../partials/footer') %>